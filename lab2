University: ITMO University
Faculty: ICT
Course: Network programming
Year: 2022/2023 
Group: K34212 
Author: Sorokina Irina
Lab2 

Цель работы
С помощью Ansible настроить несколько сетевых устройств и собрать информацию о них. Правильно собрать файл Inventory.

Ход работы
Устанавливаем второй CHR и второго OpenVPN клиента на нем. Создаем вторую виртуальную машину Mikrotik по аналогии с первой лабораторной работой. И в результате имеем 2 ВМ, настроенные как OpenVPN client.

Затем создаем файл hosts в /etc/ansible в котором размещаем информацию о локальных ip двух Mikrotik RouterOS.
 
Настраиваем SSH соединения для виртуальных машин через winbox.
 
В VirtualBox добавляем NAT соединение и прописываем SSH с портами. Проверяем подключение на сервере командой ssh -p 22 admin@172.27.244.8. После чего вводим установленный на CHR пароль.

 

Создаем первый playbook.yml файл в /etc/ansible. 
Для проверки соединения выводим информацию о роутерах с помощью "/system resource print". 
Также записываем команды, требующиеся для задания.
 
Результат выполнения playbook, команда «ansible-playbook playbook.yml».
 

Проверим, что новый пользователь был создан на обоих роутерах.
 
 
Изменение времени также отобразилось в консоли на обоих роутерах.
 
 
Для проверки OSPF в winbox перейдем в /ip/neighbors и там должен появиться сосед.
 
Выполняем команду ping для роутеров в полученной локальной сети.
 
  
Сохраняем конфигурацию, после чего в /files можно будет найти нужный файл и скачать на основную машину.
 
Нарисуем схему связи.
 
4. Вывод
В ходе выполнения работы было получено первичное представление об Ansible, как о мощном инструменте управления конфигурацией. Убедились в том, что его удобно использовать, когда в сети есть множество машин с незначительными отличиями.
